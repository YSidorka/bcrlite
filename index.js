const bcrEl=document.querySelector("bar-code-reader");initModal("bcr-modal");const bodyEl=document.querySelector("body");bodyEl?.addEventListener("bcr:has-result",onCodeDetected);const searchBtn=document.querySelector(".search-group button");function initModal(e){try{const t=document.getElementById(e);if(!t)return;const c=new bootstrap.Modal(`#${e}`,{keyboard:!1,backdrop:"static",focus:!1});t.addEventListener("show.bs.modal",(()=>{sendEvent("bcr:init")})),t.addEventListener("hidden.bs.modal",(()=>{sendEvent("bcr:stop")}));const n=document.querySelector(".open-modal");n?.addEventListener("click",(()=>{c.show()}));const o=t.querySelector(".close-modal");o?.addEventListener("click",(()=>{c.hide()}));const r=t.querySelector(".bcr-reset");r?.addEventListener("click",(()=>{sendEvent("bcr:reset")}));const d=t.querySelector(".bcr-submit");return d?.addEventListener("click",(()=>{sendEvent("bcr:submit")})),c}catch(e){return null}}function sendEvent(e,t=bcrEl){t?.dispatchEvent(new Event(e))}async function onClickSearchBtn(){const e=document.querySelector(".search-group input");if(!e||!e.value)return;setProductTag(await getProduct(e.value))}async function getProduct(e){try{if(!e)return null;const t=await fetch(`http://localhost:3000/${e}`,{method:"GET"}),c=await t.json();return c.data}catch(e){return null}}function setProductTag(e){const t=document.querySelector("product");if(!t)return;if(!e)return void(t.innerHTML=['<div class="alert alert-secondary alert-dismissible mb-3">',"<div>Product not found</div>",'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',"</div>"].join(""));const{title:c,imageUrl:n,description:o}=e;t.innerHTML=['<div class="card mb-3">','<div class="row g-0">','<div class="col-md-4">',`<img src="${n}" class="img-fluid rounded-start py-3">`,"</div>",'<div class="col-md-8">','<div class="card-body">',`<h5 class="card-title">${c||""}</h5>`,"</div></div></div></div>"].join("")}function onCodeDetected(e){try{const t=e.detail,c=document.querySelector(".search-group input");c&&(c.value=t?.code||"");sendEvent("click",document.querySelector(".search-group button"))}catch(e){console.log(e)}}searchBtn?.addEventListener("click",onClickSearchBtn);